<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>HUD Example - Javascript USWDS Embedded Form</title>

        <style type="text/css">
            body {
                background-color: #FFCC00;
            }
            .pageContainer { 
                position: absolute;
                width: 80%; 
                top: 5%; 
                left: 10%; 
                background-color: white; 
            }
        </style>
    </head>
    <body>
        <div class="pageContainer">
            <noscript id="deferred-styles">
                <link rel="stylesheet" type="text/css" href="https://unpkg.com/formiojs@4.12.0/dist/formio.full.min.css" />
                <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/uswds/2.9.0/css/uswds.min.css" />
                <link rel="stylesheet" type="text/css" href="https://unpkg.com/@formio/uswds@2.0.0-rc.8/dist/uswds.css" />
            </noscript>
            <script>
                var loadDeferredStyles = function() {
                    var addStylesNode = document.getElementById("deferred-styles");
                    var replacement = document.createElement("div");
                    replacement.innerHTML = addStylesNode.textContent;
                    document.body.appendChild(replacement)
                    addStylesNode.parentElement.removeChild(addStylesNode);
                };
                var raf = window.requestAnimationFrame || window.mozRequestAnimationFrame ||
                    window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
                if (raf) raf(function() { 
                    window.setTimeout(loadDeferredStyles, 0); 
                });
                else window.addEventListener('load', loadDeferredStyles);
            </script>

            <script src="https://unpkg.com/formiojs@4.12.0/dist/formio.full.min.js"></script>
            <script src="https://cdnjs.cloudflare.com/ajax/libs/uswds/2.9.0/js/uswds.min.js"></script>
            <script src="https://unpkg.com/@formio/uswds@2.0.0-rc.8/dist/uswds.js"></script>

            <div id="formio"></div>

            <script type="text/javascript">
                window.onload = function() {
                    Formio.use(uswds);
                    Formio.createForm(document.getElementById('formio'), 
                    'https://dev-portal.fs.gsa.gov/review/hud903'
                    ).then(function(form) {
                        // Submit the form
                        form.on('submit', function (submission) {
                            window.location=('submitted.html?submission_id=' + submission._id);
                        });
                    });
                }
            </script>
        </div>
    </body>
</html>